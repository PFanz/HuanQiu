function Drag(){this.initialize.apply(this,arguments)}Drag.prototype={initialize:function(t,i){this.drag=this.$(t),this._x=this._y=0,this._moveDrag=this.bind(this,this.moveDrag),this._stopDrag=this.bind(this,this.stopDrag),this.setOptions(i),this.handle=this.$(this.options.handle),this.maxContainer=this.$(this.options.maxContainer),this.maxTop=Math.max(this.maxContainer.clientHeight,this.maxContainer.scrollHeight)-this.drag.offsetHeight,this.maxLeft=Math.max(this.maxContainer.clientWidth,this.maxContainer.scrollWidth)-this.drag.offsetWidth,this.limit=this.options.limit,this.lockX=this.options.lockX,this.lockY=this.options.lockY,this.lock=this.options.lock,this.direction=this.options.direction,this.onStart=this.options.onStart,this.onMove=this.options.onMove,this.onStop=this.options.onStop,"h"==this.direction?this.handle.style.cursor="w-resize":"v"==this.direction&&(this.handle.style.cursor="s-resize"),this.changeLayout(),this.addHandler(this.handle,"mousedown",this.bind(this,this.startDrag))},changeLayout:function(){this.drag.style.top=this.drag.offsetTop+"px",this.drag.style.left=this.drag.offsetLeft+"px",this.drag.style.position="absolute",this.drag.style.margin="0"},startDrag:function(t){var t=t||window.event;this._x=t.clientX-this.drag.offsetLeft,this._y=t.clientY-this.drag.offsetTop,this.addHandler(document,"mousemove",this._moveDrag),this.addHandler(document,"mouseup",this._stopDrag),t.preventDefault&&t.preventDefault(),this.handle.setCapture&&this.handle.setCapture(),this.onStart()},moveDrag:function(t){var t=t||window.event,i=t.clientY-this._y,e=t.clientX-this._x;this.lock||(this.limit&&(i<0&&(i=0),e<0&&(e=0),i>this.maxTop&&(i=this.maxTop),e>this.maxLeft&&(e=this.maxLeft)),this.lockY||(this.drag.style.top=i+"px"),this.lockX||(this.drag.style.left=e+"px"),t.preventDefault&&t.preventDefault(),this.onMove())},stopDrag:function(){this.removeHandler(document,"mousemove",this._moveDrag),this.removeHandler(document,"mouseup",this._stopDrag),this.handle.releaseCapture&&this.handle.releaseCapture(),this.onStop()},setOptions:function(t){this.options={handle:this.drag,limit:!0,lock:!1,lockX:!1,lockY:!1,maxContainer:document.documentElement||document.body,onStart:function(){},onMove:function(){},onStop:function(){}};for(var i in t)this.options[i]=t[i]},$:function(t){return"string"==typeof t?document.getElementById(t):t},addHandler:function(t,i,e){return t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent("on"+i,e)},removeHandler:function(t,i,e){return t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent("on"+i,e)},bind:function(t,i){return function(){return i.apply(t,arguments)}}};