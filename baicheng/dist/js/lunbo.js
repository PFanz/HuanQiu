"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),Lunbo=function(){function t(e){_classCallCheck(this,t);var n=e.contentElem,a=e.autoplay,i=e.pause,l=e.contin,o=e.delay,s=e.hasDot,r=e.hasArrow;this.contentElem=n.length?n[0]:n,this.autoplay=a||!0,this.pause=i||!0,this.contin=l||1,this.delay=o||3,this.hasDot=s||!0,this.hasArrow=r||!0,this.imgListElem=n.querySelector("ul"),this.len=n.querySelectorAll("img").length,this.imgWidth=n.clientWidth,this._n=0,this.movingFlag=null}return _createClass(t,[{key:"turn",value:function(t){var e=this,n=this._n+t;n<0?n+=this.len:n>=this.len&&(n-=this.len);var a=-n*this.imgWidth,i=-this._n*this.imgWidth,l=a-i;if(this.movingFlag&&(clearInterval(this.movingFlag),this.movingFlag=null),this.movingFlag=setInterval(function(){var t=l/(1e3*e.contin)*13,n=parseFloat(e.contentElem.querySelector("ul").style.left)+t;t<0?n<=a&&(n=a,clearInterval(e.movingFlag),e.movingFlag=null):t>0&&n>=a&&(n=a,clearInterval(e.movingFlag),e.movingFlag=null),e.contentElem.querySelector("ul").style.left=n+"px"},13),this._n=n,this.hasDot){for(var o=this.contentElem.parentNode.querySelectorAll(".dot"),s=0,r=o.length;s<r;s++)o[s].classList.remove("active");o[n].classList.add("active")}}},{key:"createDots",value:function(){var t=document.createElement("div");t.setAttribute("class","focus-dots-content"),t.setAttribute("style","position: absolute;");for(var e='<a href="javascript:void(0);" class="dot active" style="display:inline-block;"></a>',n=1;n<this.len;n++)e+='<a href="javascript:void(0);" class="dot" style="display:inline-block;"></a>';t.innerHTML=e,this.contentElem.parentNode.appendChild(t)}},{key:"createArrow",value:function(){var t=document.createElement("div");t.setAttribute("class","focus-arrows-content");var e='<a href="javascript:void(0);" class="focus-arrow-pre"></a><a href="javascript:void(0);" class="focus-arrow-next"></a>';t.innerHTML=e,this.contentElem.parentNode.appendChild(t)}},{key:"addEvent",value:function(){var t=this;if(this.hasArrow){var e=this.contentElem.parentNode.querySelector(".focus-arrows-content");e.onclick=function(e){var n=e.target||e.srcElement;"focus-arrow-pre"===n.className&&(t.movingFlag&&clearInterval(t.movingFlag),t.turn(-1)),"focus-arrow-next"===n.className&&(t.movingFlag&&clearInterval(t.movingFlag),t.turn(1))}}this.hasDot&&!function(){var e=t.contentElem.parentNode.querySelector(".focus-dots-content"),n=e.querySelectorAll(".dot");e.onclick=function(e){var a=e.target||e.srcElement;if(a.className.indexOf("dot")!==-1){if(a.className.indexOf("active")!==-1)return;var i=0;n.forEach(function(t,e){t===a&&(i=e)}),t.turn(i-t._n)}}}()}},{key:"initFocus",value:function(){var t=this;this.imgListElem.style.width=this.len*this.imgWidth+"px",this.imgListElem.style.position="absolute",this.imgListElem.style.left=0,this.hasArrow&&this.createArrow(),this.hasDot&&this.createDots(),this.addEvent(),this.contentElem.style.position="relative",this.contentElem.style.fontSize=0,this.contentElem.style.overflow="hidden";var e=this.contentElem.querySelectorAll("li"),n=this.contentElem.clientHeight;e.forEach(function(e){e.style.display="inline-block",e.style.width=t.imgWidth+"px",e.style.height=n+"px",e.querySelector("img").style.width="100%",e.querySelector("img").style.height="100%"}),this.autoplay&&(this.autoplayFlag=setInterval(function(){t.turn(1)},1e3*this.delay),this.pause&&(this.contentElem.addEventListener?(this.contentElem.addEventListener("mouseenter",function(){clearInterval(t.autoplayFlag)}),this.contentElem.addEventListener("mouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)})):this.contentElem.attachEvent&&(this.contentElem.attachEvent("onmouseenter",function(){clearInterval(t.autoplayFlag)}),this.contentElem.attachEvent("onmouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)}))))}}]),t}();new Lunbo({contentElem:document.querySelector(".block-image-focus")}).initFocus();var mainLunbo=new Lunbo({contentElem:document.querySelector(".mod-focus")});mainLunbo.createDots=function(){var t=mainLunbo.contentElem.querySelectorAll("img"),e=document.createElement("div");e.setAttribute("class","focus-dots-content");for(var n="",a=0;a<mainLunbo.len;a++)n+='<a href="javascript:void(0);" class="dot"><img src='+t[a].src+" alt="+t[a].alt+" /></a>";n+="</div>",e.innerHTML=n;var i=document.querySelector(".mod-focus");i=i.parentNode,i.appendChild(e);var l=e.querySelectorAll(".dot");l[0].classList.add("active")},mainLunbo.initFocus();