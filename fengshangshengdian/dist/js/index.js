"use strict";function vote(t,e,a){$.ajax({type:"GET",dataType:"jsonp",url:"http://toys.m.people.cn/apps/vote/limit.php?article_id=1&question_id=4&answer=1&callback=a",success:function(t){console.log(t)}})}var compareTime=function(t){var e=arguments.length<=1||void 0===arguments[1]?+new Date:arguments[1],a=t-e;a=a>0?a:-a;var n=Math.floor(a/864e5);n=n<10?"0"+n:n,a-=24*n*60*60*1e3;var s=Math.floor(a/36e5);s=s<10?"0"+s:s,a-=60*s*60*1e3;var i=Math.floor(a/6e4);i=i<10?"0"+i:i,a-=60*i*1e3;var l=Math.floor(a/1e3);return l=l<10?"0"+l:l,{date:n,hours:s,minutes:i,seconds:l}},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Lunbo=function(t){var e={autoplay:!0,pause:!0,contin:1,delay:3,hasDot:!1,hasArrow:!1};t=_extends({},e,t);var a=t,n=a.contentElem,s=a.autoplay,i=a.pause,l=a.contin,r=a.delay,o=a.hasDot,c=a.hasArrow;void 0!==n.length?this.contentElem=n[0]:this.contentElem=n,this.autoplay=s,this.pause=i,this.contin=l,this.delay=r,this.hasDot=o,this.hasArrow=c,this.imgListElem=n.querySelector("ul"),this.len=n.querySelectorAll("img").length,this.imgWidth=n.clientWidth,this._n=0,this.movingFlag=null};Lunbo.prototype={turn:function(t){var e=this,a=this._n+t;a<0?a+=this.len:a>=this.len&&(a-=this.len),this.movingFlag&&(clearInterval(this.movingFlag),this.movingFlag=null);var n=-a*this.imgWidth,s=parseFloat(this.imgListElem.style.left),i=(n-s)/(1e3*this.contin)*13;if(this.movingFlag=setInterval(function(){var t=parseFloat(e.imgListElem.style.left)+i;i<0?t<=n&&(t=n,clearInterval(e.movingFlag),e.movingFlag=null):i>0&&t>=n&&(t=n,clearInterval(e.movingFlag),e.movingFlag=null),e.imgListElem.style.left=t+"px"},13),this._n=a,this.hasDot){for(var l=this.contentElem.parentNode.querySelectorAll(".dot"),r=0,o=l.length;r<o;r++)l[r].className="dot";l[a].className="dot active"}},createDots:function(){var t=document.createElement("div");t.setAttribute("class","focus-dots-content");for(var e='<a href="javascript:void(0);" class="dot active"></a>',a=1;a<this.len;a++)e+='<a href="javascript:void(0);" class="dot"></a>';t.innerHTML=e,this.contentElem.parentNode.appendChild(t)},createArrows:function(){var t=document.createElement("div");t.setAttribute("class","focus-arrows-content");var e='<a href="javascript:void(0);" class="focus-arrow-pre"></a><a href="javascript:void(0);" class="focus-arrow-next"></a>';t.innerHTML=e,this.contentElem.parentNode.appendChild(t)},addEvent:function(){var t=this;if(this.hasArrow){var e=this.contentElem.parentNode.querySelector(".focus-arrows-content");e.onclick=function(e){e=e||window.event;var a=e.target||e.srcElement;a.className.indexOf("focus-arrow-pre")!==-1&&t.turn(-1),a.className.indexOf("focus-arrow-next")!==-1&&t.turn(1)}}this.hasDot&&!function(){var e=t.contentElem.parentNode.querySelector(".focus-dots-content"),a=e.querySelectorAll(".dot");e.onclick=function(e){e=e||window.event;var n=e.target||e.srcElement;if(n.className.indexOf("dot")!==-1){if(n.className.indexOf("active")!==-1)return;for(var s=0,i=0,l=a.length;i<l;i++)a[i]===n&&(s=i);t.turn(s-t._n)}}}()},init:function(){var t=this;this.contentElem.style.position="relative",this.contentElem.style.fontSize=0,this.contentElem.style.overflow="hidden",this.imgListElem.style.padding=0,this.imgListElem.style.width=this.len*this.imgWidth+"px",this.imgListElem.style.position="absolute",this.imgListElem.style.left=0,this.hasArrow&&this.createArrows(),this.hasDot&&this.createDots(),this.addEvent();for(var e=this.contentElem.querySelectorAll("li"),a=this.contentElem.clientHeight,n=0,s=e.length;n<s;n++)e[n].style.listStyle="none",e[n].style.display="inline-block",e[n].style.width=this.imgWidth+"px",e[n].style.height=a+"px",e[n].querySelector("img").style.width="100%",e[n].querySelector("img").style.height="100%";if(this.autoplay&&(this.autoplayFlag=setInterval(function(){t.turn(1)},1e3*this.delay),this.pause))if(document.addEventListener){if(this.contentElem.addEventListener("mouseenter",function(){clearInterval(t.autoplayFlag)}),this.contentElem.addEventListener("mouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)}),this.hasDot){var i=document.querySelector(".focus-dots-content");i.addEventListener("mouseenter",function(){clearInterval(t.autoplayFlag)}),i.addEventListener("mouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)})}}else if(document.attachEvent&&(this.contentElem.attachEvent("onmouseenter",function(){clearInterval(t.autoplayFlag)}),this.contentElem.attachEvent("onmouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)}),this.hasDot)){var l=document.querySelector(".focus-dots-content");l.attachEvent("onmouseenter",function(){clearInterval(t.autoplayFlag)}),l.attachEvent("onmouseleave",function(){t.autoplayFlag=setInterval(function(){t.turn(1)},1e3*t.delay)})}}},setInterval(function(){var t=compareTime(1481544e6);$("#txtDay").text(t.date),$("#txtHours").text(t.hours),$("#txtMinute").text(t.minutes),$("#txtSeconds").text(t.seconds)},1e3),new Lunbo({contentElem:document.getElementById("foucsBox"),delay:5,hasDot:!0}).init(),$("#tab-btn-0").click(function(){"none"===$("#tab-content-0").css("display")&&($(".tab-btn").removeClass("honor"),$("#tab-content-0").show(),$("#tab-content-1").hide())}),$("#tab-btn-1").click(function(){"none"===$("#tab-content-1").css("display")&&($(".tab-btn").addClass("honor"),$("#tab-content-1").show(),$("#tab-content-0").hide())}),$(".txtBox").mouseenter(function(){$(this).animate({height:"272px"})}),$(".txtBox").mouseleave(function(){$(this).animate({height:"63px"})}),$(".modelCon li").click(function(){$(this).parents(".modelCon").find("li").removeClass("active"),$(this).addClass("active"),$(this).parents(".model").find(".modelPop").slideUp("slow");var t=$("#"+$(this).attr("id")+"Con");t.slideDown("slow")}),$(".btnClose").click(function(){$(this).parents(".modelCon").find("li").removeClass("active"),$(this).parents(".model").find(".modelPop").slideUp("slow")});var $nav0=$("[href=#info]"),$nav1=$("[href=#standard]"),$nav2=$("[href=#vote]"),$nav3=$("[href=#review]"),$nav4=$("[href=#self]"),$nav5=$("[href=#company]"),$nav6=$("[href=#contact]");$(window).scroll(function(){var t=$(window).scrollTop();if(t<1e3){if($nav0.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav0.addClass("active")}else if(t<1500){if($nav1.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav1.addClass("active")}else if(t<2500){if($nav2.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav2.addClass("active")}else if(t<3300){if($nav3.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav3.addClass("active")}else if(t<7600){if($nav4.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav4.addClass("active")}else if(t<8500){if($nav5.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav5.addClass("active")}else{if($nav6.hasClass("active"))return;$(".nav-container a").removeClass("active"),$nav6.addClass("active")}});var exampleId=1,honorId=1,example=localStorage.getItem("example");null===example&&(localStorage.setItem("example",""),example=localStorage.getItem("example"));var exampleArr=example.split(","),honor=localStorage.getItem("honor");null===honor&&(localStorage.setItem("honor",""),honor=localStorage.getItem("honor"));var honorArr=honor.split(",");$.ajax({type:"get",async:!1,url:"http://surveyx.huanqiu.com/interface/get_survey/"+exampleId+"&callback=",dataType:"jsonp",success:function(t){t=t.data;var e=t.questions;console.log(e);for(var a="",n=0,s=Math.ceil(e.length/7);n<s;n++)if(n%2===0){a+='<div class="row-1">';for(var i=0,l=Math.min(e.length-7*n,7);i<l;i++){var r=e[7*n+i];a+='<div class="triangle">\n                      <div class="triangle-content-'+i+'">\n                        <img src="'+r.answers[0].imgsrc+'" alt="">\n                        <div class="triangle-cover">',a+=i%2===0?'<a href="'+r.answers[0].text+'" target="_blank">\n                        <p class="triangle-title">'+r.title+'</p>\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-num"><span>'+r.answers[0].count+"</span>人</p>\n                      </a>":'<a href="'+r.answers[0].text+'" target="_blank">\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-title">'+r.title+'</p>\n                        <p class="triangle-num"><span>'+r.answers[0].count+"</span>人</p>\n                      </a>",a+='<p class="triangle-heart '+(exampleArr.indexOf(""+r.id+r.answers[0].id)!==-1?"active":"")+'" data-qid="'+r.id+'" data-aid="'+r.answers[0].id+'"></p>\n                      </div>\n                    </div>\n                  </div>'}a+="</div>"}else{a+='<div class="row-2">';for(var o=0,c=Math.min(e.length-7*n,7);o<c;o++){var d=e[7*n+o];a+='<div class="triangle">\n                      <div class="triangle-content-'+o+'">\n                        <img src="'+d.answers[0].imgsrc+'" alt="">\n                        <div class="triangle-cover">',a+=o%2===0?'<a href="'+d.answers[0].text+'" target="_blank">\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-title">'+d.title+'</p>\n                        <p class="triangle-num"><span>'+d.answers[0].count+"</span>人</p>\n                      </a>":'<a href="'+d.answers[0].text+'" target="_blank">\n                        <p class="triangle-title">'+d.title+'</p>\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-num"><span>'+d.answers[0].count+"</span>人</p>\n                      </a>",a+='<p class="triangle-heart '+(exampleArr.indexOf(""+d.id+d.answers[0].id)!==-1?"active":"")+'" data-qid="'+d.id+'" data-aid="'+d.answers[0].id+'"></p>\n                  </div>\n                </div>\n              </div>'}a+="</div>"}$("#tab-content-0").html(a)},error:function(){console.error("数据获取错误")}}),$.ajax({type:"get",async:!1,url:"http://surveyx.huanqiu.com/interface/get_survey/"+honorId+"&callback=",dataType:"jsonp",success:function(t){t=t.data;var e=t.questions;console.log(e);for(var a="",n=0,s=Math.ceil(e.length/7);n<s;n++)if(n%2===0){a+='<div class="row-1">';for(var i=0,l=Math.min(e.length-7*n,7);i<l;i++){var r=e[7*n+i];a+='<div class="triangle">\n                      <div class="triangle-content-'+i+'">\n                        <img src="'+r.answers[0].imgsrc+'" alt="">\n                        <div class="triangle-cover">',a+=i%2===0?'<a href="'+r.answers[0].text+'" target="_blank">\n                        <p class="triangle-title">'+r.title+'</p>\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-num"><span>'+r.answers[0].count+"</span>人</p>\n                      </a>":'<a href="'+r.answers[0].text+'" target="_blank">\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-title">'+r.title+'</p>\n                        <p class="triangle-num"><span>'+r.answers[0].count+"</span>人</p>\n                      </a>",a+='<p class="triangle-heart '+(honorArr.indexOf(""+r.id+r.answers[0].id)!==-1?"active":"")+'" data-qid="'+r.id+'" data-aid="'+r.answers[0].id+'"></p>\n                  </div>\n                </div>\n              </div>'}a+="</div>"}else{a+='<div class="row-2">';for(var o=0,c=Math.min(e.length-7*n,7);o<c;o++){var d=e[7*n+o];a+='<div class="triangle">\n                      <div class="triangle-content-'+o+'">\n                        <img src="'+d.answers[0].imgsrc+'" alt="">\n                        <div class="triangle-cover">',a+=o%2===0?'<a href="'+d.answers[0].text+'" target="_blank">\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-title">'+d.title+'</p>\n                        <p class="triangle-num"><span>'+d.answers[0].count+"</span>人</p>\n                      </a>":'<a href="'+d.answers[0].text+'" target="_blank">\n                        <p class="triangle-title">'+d.title+'</p>\n                        <p class="triangle-small">查看详情</p>\n                        <p class="triangle-num"><span>'+d.answers[0].count+"</span>人</p>\n                      </a>",a+='<p class="triangle-heart '+(honorArr.indexOf(""+d.id+d.answers[0].id)!==-1?"active":"")+'" data-qid="'+d.id+'" data-aid="'+d.answers[0].id+'"></p>\n                  </div>\n                </div>\n              </div>'}a+="</div>"}$("#tab-content-1").html(a)},error:function(){console.error("数据获取错误")}}),$("#tab-content-0").on("click",".triangle-heart",function(){if(!$(this).hasClass("active")&&$("#tab-content-0 .triangle-heart.active").length<=10){var t=$(this).parents(".triangle-cover").find(".triangle-num span");t.text(+t.text()+1),$(this).addClass("active"),vote(exampleId,$(this).attr("data-qid"),$(this).attr("data-aid")),example+=""+$(this).attr("data-qid")+$(this).attr("data-aid")+",",localStorage.setItem("example",example)}}),$("#tab-content-1").on("click",".triangle-heart",function(){if(!$(this).hasClass("active")&&$("#tab-content-0 .triangle-heart.active").length<=10){var t=$(this).parents(".triangle-cover").find(".triangle-num span");t.text(+t.text()+1),$(this).addClass("active"),vote(honorId,$(this).attr("data-qid"),$(this).attr("data-aid")),honor+=""+$(this).attr("data-qid")+$(this).attr("data-aid")+",",localStorage.setItem("honor",honor)}});